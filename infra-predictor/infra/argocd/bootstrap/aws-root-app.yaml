apiVersion: argoproj.io/v1alpha1
kind: Application
metadata: { name: root-aws, namespace: openshift-gitops }
spec:
  project: infra
  source: { repoURL: '{ REPO_URL }', targetRevision: HEAD, path: argocd/applications/aws }
  destination: { server: https://kubernetes.default.svc, namespace: openshift-gitops }
  syncPolicy: { automated: { prune: true, selfHeal: true }, syncOptions: ["CreateNamespace=true"] }
